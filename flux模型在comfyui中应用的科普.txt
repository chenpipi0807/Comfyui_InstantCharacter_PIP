æ ¹æ®å¯¹Fluxæ¨¡å‹åœ¨ComfyUIä¸­éƒ¨ç½²çš„ä»£ç ç»“æ„ã€æ¨¡å‹åŠ è½½æ–¹å¼åŠç¤¾åŒºå®è·µçš„åˆ†æï¼Œç»“åˆå¤šæ¥æºçš„æŠ€æœ¯æ–‡æ¡£å’Œå¼€æºå®ç°ï¼ŒFluxæ¨¡å‹åœ¨ComfyUIä¸­**ä¸»è¦é‡‡ç”¨Transformeræ ¼å¼ï¼ˆPyTorchåŸç”Ÿæ ¼å¼ï¼‰çš„æ¨¡å‹æ–‡ä»¶**ï¼Œè€Œéå®Œæ•´çš„Diffusersæ ¼å¼ä»“åº“ç»“æ„ã€‚ä»¥ä¸‹æ˜¯å…³é”®åˆ†æåŠéƒ¨ç½²è¦ç‚¹ï¼š

---

### âš™ï¸ **ä¸€ã€æ¨¡å‹ç»“æ„ï¼šTransformeræ ¼å¼ä¸ºä¸»**
Fluxæ¨¡å‹åœ¨ComfyUIä¸­ä»¥**åˆ†æ‹†çš„ç‹¬ç«‹æƒé‡æ–‡ä»¶**å½¢å¼å­˜åœ¨ï¼Œéœ€åˆ†åˆ«ä¸‹è½½å¹¶æ”¾ç½®åˆ°æŒ‡å®šç›®å½•ï¼Œå…¶ç»“æ„ç‰¹å¾å¦‚ä¸‹ï¼š
1. **æ ¸å¿ƒæ¨¡å‹ç»„ä»¶ç‹¬ç«‹å­˜å‚¨**ï¼š
   - **UNetä¸»æ¨¡å‹**ï¼šä¿å­˜ä¸º`.safetensors`æ–‡ä»¶ï¼ˆå¦‚`flux1-fp8-dev.safetensors`ï¼‰ï¼Œå­˜æ”¾äº`ComfyUI/models/unet`ç›®å½•ã€‚
   - **CLIPæ–‡æœ¬ç¼–ç å™¨**ï¼šåˆ†ä¸º`t5xxl_fp8_e4m3fn.safetensors`ï¼ˆFP8é‡åŒ–ç‰ˆï¼‰å’Œ`clip_l.safetensors`ï¼Œå­˜æ”¾äº`ComfyUI/models/clip`ã€‚
   - **VAEè§£ç å™¨**ï¼šæ–‡ä»¶`ae.safetensors`å­˜æ”¾äº`ComfyUI/models/vae`ã€‚
   - **ControlNet/LoRA**ï¼šå¦‚Inpainting ControlNetéœ€é‡å‘½ååæ”¾å…¥`ComfyUI/models/controlnet`ï¼ŒLoRAæ¨¡å‹æ”¾å…¥`ComfyUI/models/loras`ã€‚

2. **ä¸Diffusersæ ¼å¼çš„å·®å¼‚**ï¼š
   - âŒ **æ— `model_index.json`**ï¼šç¼ºå°‘Diffusersæ ¼å¼çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œæ— æ³•é€šè¿‡`DiffusionPipeline.from_pretrained()`ç›´æ¥åŠ è½½ã€‚
   - âŒ **æ— æ¨¡å—åŒ–å­ç›®å½•**ï¼šæœªæŒ‰Diffusersæ ‡å‡†åˆ†ç¦»`scheduler`ã€`feature_extractor`ç­‰ç»„ä»¶ï¼Œè°ƒåº¦å™¨ç­‰é…ç½®éœ€é€šè¿‡ComfyUIèŠ‚ç‚¹æ‰‹åŠ¨è®¾ç½®ã€‚

3. **åŠ è½½é€»è¾‘**ï¼š
   ComfyUIé€šè¿‡**è‡ªå®šä¹‰èŠ‚ç‚¹**ï¼ˆå¦‚`FluxLoader`ã€`Xlabs Sampler`ï¼‰åŠ è½½åˆ†æ‹†çš„æƒé‡æ–‡ä»¶ï¼Œè€Œéè°ƒç”¨Diffusers APIã€‚

---

### ğŸ§© **äºŒã€å·¥ä½œæµå…³é”®ç»„ä»¶**
Fluxåœ¨ComfyUIä¸­çš„å·¥ä½œæµéœ€ä»¥ä¸‹æ ¸å¿ƒèŠ‚ç‚¹æ”¯æŒï¼š
1. **æ¨¡å‹åŠ è½½èŠ‚ç‚¹**ï¼š
   - `FluxModelLoader`ï¼šåŠ è½½UNetä¸»æ¨¡å‹ï¼ˆå¦‚FP8é‡åŒ–ç‰ˆæ˜¾å­˜å ç”¨12GBï¼‰ã€‚
   - `DualCLIPLoader`ï¼šåŒæ—¶åŠ è½½T5XXLå’ŒCLIP-Læ–‡æœ¬ç¼–ç å™¨ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€ä¸æ ‡ç­¾ç±»æç¤ºè¯åˆ†ç¦»å¤„ç†ã€‚
2. **é‡‡æ ·ä¸ä¼˜åŒ–èŠ‚ç‚¹**ï¼š
   - `Xlabs Sampler`ï¼šä¸“ä¸ºFluxè®¾è®¡çš„é‡‡æ ·å™¨ï¼Œæ”¯æŒåŠ¨æ€CFGï¼ˆæ¨èå€¼1.0â€“2.5ï¼‰ã€‚
   - `FluxGuidance`ï¼šè´¨é‡å¢å¼ºèŠ‚ç‚¹ï¼Œæ›¿ä»£ä¼ ç»ŸCFGç¼©æ”¾ï¼ˆé»˜è®¤å¯ç”¨ï¼Œå¼ºåº¦3.0ï¼‰ã€‚
3. **æ‰©å±•åŠŸèƒ½èŠ‚ç‚¹**ï¼š
   - `Flux-ControlNet`ï¼šé€‚é…Depth/Cannyç­‰ControlNetæ¨¡å‹ï¼Œéœ€ç‹¬ç«‹ä¸‹è½½å¹¶é‡å‘½åã€‚
   - `LoRA Stacker`ï¼šæ”¯æŒå¤šLoRAå åŠ ï¼ˆå¦‚ç»†èŠ‚å¢å¼ºLoRA+è‰ºæœ¯é£æ ¼LoRAï¼‰ã€‚

---

### ğŸ“¥ **ä¸‰ã€æ¨¡å‹ä¸‹è½½ä¸éƒ¨ç½²æŒ‡å—**
#### 1. **å¿…å¤‡æ¨¡å‹ä¸‹è½½æ¸…å•**
| **ç»„ä»¶ç±»å‹**       | **æ¨èç‰ˆæœ¬**                     | **ä¸‹è½½è·¯å¾„**                                                                 | **å­˜æ”¾ç›®å½•**               |
|--------------------|----------------------------------|-----------------------------------------------------------------------------|----------------------------|
| **UNetä¸»æ¨¡å‹**     | `flux1-fp8-dev`ï¼ˆ12GBæ˜¾å­˜ï¼‰      | [HuggingFace: Kijai/flux-fp8](https://hf-mirror.com/Kijai/flux-fp8)         | `models/unet`             |
| **CLIPæ–‡æœ¬ç¼–ç å™¨** | `t5xxl_fp8_e4m3fn.safetensors`   | [HuggingFace: comfyanonymous/flux_text_encoders](https://hf-mirror.com/comfyanonymous/flux_text_encoders) | `models/clip`             |
| **VAEè§£ç å™¨**      | `ae.safetensors`                 | [HuggingFace: black-forest-labs/FLUX.1-dev](https://hf-mirror.com/black-forest-labs/FLUX.1-dev)       | `models/vae`              |
| **ControlNet**     | `Flux-ControlNet-Inpainting`     | [é˜¿é‡Œå¦ˆå¦ˆå¼€æºä»“åº“](https://hf-mirror.com/alimama-creative/FLUX.1-dev-Controlnet-Inpainting-Alpha)    | `models/controlnet`       |
| **å¸¸ç”¨LoRA**       | `Aesthetic10k.safetensors`       | [XLabs-AI Collection](https://hf-mirror.com/XLabs-AI/flux-lora-collection)              | `models/loras`            |

> æ³¨ï¼šFP8é‡åŒ–æ¨¡å‹æ˜¾å­˜å ç”¨å‡åŠï¼ˆ12GB vs 24GBï¼‰ï¼Œä½†éœ€æ­é…FP8 CLIPç‰ˆæœ¬ä½¿ç”¨ã€‚

#### 2. **å…¸å‹å·¥ä½œæµç¤ºä¾‹**
- **æ–‡ç”Ÿå›¾åŸºç¡€æµ**ï¼š`FluxModelLoader â†’ DualCLIPLoader â†’ KSampler (Xlabs) â†’ VAE Decoder`ã€‚
- **ControlNetä¿®å¤æµ**ï¼šåŠ è½½Inpainting ControlNet â†’ è¿æ¥æ©ç å›¾åƒ â†’ è®¾ç½®`control_strength=0.9`ã€‚
- **LoRAæ··åˆé£æ ¼æµ**ï¼šå åŠ `Extreme Detailer`ï¼ˆæƒé‡0.8ï¼‰ + `Mythical Fantasy`ï¼ˆæƒé‡0.4ï¼‰ã€‚

---

### âš¡ **å››ã€ä¼˜åŒ–æŠ€å·§ä¸å¸¸è§é—®é¢˜**
1. **æ˜¾å­˜ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨FP8é‡åŒ–æ¨¡å‹ï¼ˆ`flux1-fp8-dev` + FP8 CLIPï¼‰å¯å°†æ˜¾å­˜éœ€æ±‚é™è‡³12GBã€‚
   - å¯ç”¨`--lowvram`æ¨¡å¼æˆ–Tiled VAEæ’ä»¶å¤„ç†é«˜åˆ†è¾¨ç‡å›¾åƒã€‚
2. **å‚æ•°è°ƒä¼˜**ï¼š
   - **ControlNetå¼ºåº¦**ï¼š0.4â€“0.8ï¼ˆè¿‡é«˜å¯¼è‡´è¿‡æ‹Ÿåˆï¼Œè¿‡ä½ä¸¢å¤±ç»†èŠ‚ï¼‰ã€‚
   - **åŠ¨æ€CFG**ï¼šåˆå§‹é˜¶æ®µCFG=3.0ï¼ŒåæœŸé™è‡³1.5é¿å…é¢—ç²’æ„Ÿã€‚
3. **é”™è¯¯æ’æŸ¥**ï¼š
   - **LoRAå…¼å®¹é—®é¢˜**ï¼šFP8ä¸»æ¨¡å‹éœ€æ­é…FP16 LoRAï¼Œå¦åˆ™æ˜¾å­˜æº¢å‡ºï¼ˆéœ€é‡ä¸‹è½½é€‚é…ç‰ˆæœ¬ï¼‰ã€‚
   - **èŠ‚ç‚¹ç¼ºå¤±**ï¼šå·¥ä½œæµéœ€åŒ…å«`FluxGuidance`èŠ‚ç‚¹ï¼Œå¦åˆ™ç”Ÿæˆè´¨é‡ä¸‹é™ã€‚

---

### ğŸ’ **æ€»ç»“ï¼šFluxåœ¨ComfyUIä¸­çš„å®šä½**
- **æ ¼å¼é€‰æ‹©**ï¼šFluxé‡‡ç”¨**Transformeræ ¼å¼åˆ†æ‹†æƒé‡**ï¼ŒéDiffusersæ ¼å¼ï¼Œéœ€æ‰‹åŠ¨æ•´åˆç»„ä»¶ã€‚
- **ä¼˜åŠ¿**ï¼šæ¨¡å—åŒ–è®¾è®¡ä¾¿äºçµæ´»æ›¿æ¢ï¼ˆå¦‚CLIP/VAEç‹¬ç«‹å‡çº§ï¼‰ï¼Œå…¼å®¹ControlNet/LoRAç”Ÿæ€ã€‚
- **å±€é™**ï¼šç¼ºä¹Diffusersçš„â€œå¼€ç®±å³ç”¨â€æ€§ï¼Œä¾èµ–ComfyUIç‰¹å®šèŠ‚ç‚¹å®ç°å®Œæ•´æµç¨‹ã€‚

> éƒ¨ç½²å»ºè®®ï¼šä»[HuggingFace Fluxç¤¾åŒº](https://hf-mirror.com/black-forest-labs)ä¸‹è½½åˆ†æ‹†æ¨¡å‹ï¼Œæ­é…[é˜¿é‡Œå¦ˆå¦ˆControlNetå·¥ä½œæµ](https://hf-mirror.com/alimama-creative/FLUX.1-dev-Controlnet-Inpainting-Alpha)å¯å¿«é€Ÿå®ç°é«˜çº§åŠŸèƒ½ã€‚